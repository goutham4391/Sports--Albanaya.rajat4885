"use strict";(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi||[]).push([[6548],{42132:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(66017),i=n(20011),o=n(23788),r=n(27762),s=n.n(r),l=n(50417),m=n(25114),u=n(17607),d=n(28945),c=n(23712),h=n.n(c),p=n(40841),g=n.n(p),f=(n(87308),function(e){return e.startsWith("http://")||e.startsWith("https://")}),v=function(e,t){return f(e)?e:("image"===t?(n="https://static.wixstatic.com/",a="media/"):(n="https://video.wixstatic.com/",a="video/"),n+(e.startsWith(a)?e:a+e));var n,a},y=function(e){var t=e.item,n=e.originalUrl,a=e.resizeMethod,i=e.requiredWidth,o=e.requiredHeight,r=e.sharpParams,s=e.focalPoint;if(r=r||{},-1!==(n=n||"").indexOf("base64"))return n;if(i=Math.ceil(i),o=Math.ceil(o),a===d.G.VIDEO)return v(n,d.G.VIDEO);if(i>=t.maxWidth&&o>=t.maxHeight){var l=t.dto.metaData.type===d.G.VIDEO?n:t.url;return v(l,d.G.IMAGE)}return function(e,t,n,a,i,o,r){t=t||"",(o=o||{}).quality>0&&(o.quality=Math.min(90,o.quality));var s={x:50,y:50};r&&r[0]>=0&&r[1]>=0&&(s.x=Math.round(100*r[0]),s.y=Math.round(100*r[1])),!0===o.allowUsm&&o.usm?(o.usm.usm_a=Math.min(5,Math.max(0,o.usm.usm_a||0)),o.usm.usm_r=Math.min(128,Math.max(0,o.usm.usm_r||0)),o.usm.usm_t=Math.min(1,Math.max(0,o.usm.usm_t||0))):o.usm={usm_a:0,usm_r:0,usm_t:0};var l=function(){};l="fit"===n?h().getScaleToFitImageURL:h().getScaleToFillImageURL;var m={};return o.quality>0&&(m.quality=o.quality),o.blur>0&&(m.filters={blur:o.blur}),s&&(m.focalPoint=s),o&&o.usm&&(m.unsharpMask={radius:parseFloat(o.usm.usm_r),amount:parseFloat(o.usm.usm_a),threshold:parseFloat(o.usm.usm_t)}),f(t)?t:l(t.replace("https://static.wixstatic.com/",""),e.maxWidth,e.maxHeight,a,i,m)}(t,n,a,i,o,r,s)},D={gallery_container:"_1lf3C",expandContainer:"_2trtH",itemOverlay:"_2Vr_d",expandIcon:"_1nQrL",clickableItem:"_2QozM",imageTitle:"w8o3K",imageTitleContainer:"F9_4B",pointer:"_1pMUq"},E=function(e){return s().createElement("svg",(0,i.Z)({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},e),s().createElement("path",{d:"M15.071 8.371V4.585l-4.355 4.356a.2.2 0 0 1-.283 0l-.374-.374a.2.2 0 0 1 0-.283l4.356-4.355h-3.786a.2.2 0 0 1-.2-.2V3.2c0-.11.09-.2.2-.2H16v5.371a.2.2 0 0 1-.2.2h-.529a.2.2 0 0 1-.2-.2zm-6.5 6.9v.529a.2.2 0 0 1-.2.2H3v-5.371c0-.11.09-.2.2-.2h.529c.11 0 .2.09.2.2v3.786l4.355-4.356a.2.2 0 0 1 .283 0l.374.374a.2.2 0 0 1 0 .283L4.585 15.07h3.786c.11 0 .2.09.2.2z",fill:"#000",fillRule:"nonzero"}))},w=["scrollingElement"],x=n(27971),b=x.ProGallery,_=x.GALLERY_CONSTS,M=_.events,k=function(e){function t(t){var n;return(0,l.GuS)(t.componentData,m),(n=e.call(this,t)||this).shouldUpdateDimensions=function(e){var t=e.styles.galleryLayout;return n.props.componentData.styles.galleryLayout!==t||!(0,u.isEqual)(e.config,n.props.componentData.config)||void 0},n.shouldConsiderThumbnailSize=function(){var e=n.props.componentData.styles,t=e.galleryLayout,a=e.galleryThumbnailsAlignment;return n.props.isMobile&&t===d.a.THUMBNAIL&&["top","bottom"].includes(a)},n.getGalleryHeight=function(e){var t=305;return e&&(t=n.shouldConsiderThumbnailSize()?Math.floor(2*e/3)+95:Math.floor(3*e/4)),t},n.getDimensions=function(){var e=Math.floor(n.containerRef.current.getBoundingClientRect().width);return{width:e,height:n.getGalleryHeight(e)}},n.updateDimensions=(0,u.debounce)((function(){var e,t,a=n.getDimensions(),i=a.width,o=a.height;i===(null===(e=n.state.size)||void 0===e?void 0:e.width)&&o===(null===(t=n.state.size)||void 0===t?void 0:t.height)||n.setState({size:{width:i,height:o}})}),100),n.handleGalleryEvents=function(e,t){var a=n.props.componentData.styles;switch(e){case M.GALLERY_CHANGE:n.containerRef.current&&((0,d.i)(a)?n.containerRef.current.style.height="auto":n.containerRef.current.style.height=t.layoutHeight+"px");break;case M.ITEM_ACTION_TRIGGERED:"video"!==t.type&&!t.linkData.url&&n.hasExpand()&&n.handleExpand(t)}},n.handleExpand=function(e){var t,a=n.props,i=a.settings.onExpand,o=a.helpers,r=void 0===o?{}:o;null===(t=r.onViewerAction)||void 0===t||t.call(r,d.b,"Click","expand_gallery"),n.hasExpand()&&i(n.props.blockKey,e.idx)},n.renderExpandIcon=function(e){return s().createElement("div",{className:n.styles.expandContainer},s().createElement(E,{className:n.styles.expandIcon,onClick:function(t){t.preventDefault(),t.stopPropagation(),n.handleExpand(e)}}))},n.hasExpand=function(){var e=n.props,t=e.componentData,a=e.settings,i=!1;return void 0!==t.disableExpand?i=t.disableExpand:void 0!==a.disableExpand&&(i=a.disableExpand),!i&&a.onExpand},n.renderTitle=function(e){return e?s().createElement("div",{className:D.imageTitleContainer},s().createElement("div",{className:n.styles.imageTitle},e)):null},n.hoverElement=function(e){var t,a,i=n.hasExpand()||e.link,o=g()(n.styles.itemOverlay,i&&n.styles.clickableItem);return s().createElement("div",{className:o},n.hasExpand()&&n.renderExpandIcon(e),n.renderTitle(e.title,"HOVER"),null===(t=(a=n.props).itemOverlayElement)||void 0===t?void 0:t.call(a,e))},n.getStyleParams=function(){var e=n.props,t=e.componentData,a=t.styles,o=t.disableDownload,r=e.isMobile,s=(0,i.Z)({},(0,d.g)(a.galleryLayout),{allowContextMenu:!o,showArrows:(0,d.i)(a)},a);return r&&(s.m_numberOfImagesPerRow&&(s.numberOfImagesPerRow=s.m_numberOfImagesPerRow),(0,d.i)(s)&&(s.arrowsSize=20,!a.imageMargin&&(s.imageMargin=0),s.galleryLayout===d.a.THUMBNAIL&&(s.thumbnailSize=90))),s.oneRow&&(s.scrollDirection=_.scrollDirection.HORIZONTAL),s.thumbnailSpacings&&(s.thumbnailSpacings/=2),s},n.handleContextMenu=function(e){var t=n.props.componentData.disableDownload;return void 0!==t&&t&&e.preventDefault()},n.domId=n.props.blockKey||"v-"+n.props.entityIndex,n.containerRef=s().createRef(),n.state={items:[]},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("resize",this.updateDimensions),this.setState({size:this.getDimensions()}),this.initUpdateDimensionsForDomChanges()},n.initUpdateDimensionsForDomChanges=function(){var e,t,n=this,a=(null===(e=this.props)||void 0===e?void 0:e.settings).scrollingElement;a||(console.error("Please fix the gallery config of Rich Content Editor.\n        A scrollingElement needs to be provided. Without it the gallery will not work correctly"),a=document.body);var i="function"==typeof a?a():a;1!==(null===(t=i)||void 0===t?void 0:t.nodeType)&&(i=document.body),i?(this.observer=new MutationObserver((function(){i.clientHeight!==n.oldContentElementHeight&&(n.oldContentElementHeight=i.clientHeight,n.updateDimensions())})),this.observer.observe(i,{attributes:!0,childList:!0,subtree:!0})):console.warn("can't find content container to listen for changes to update gallery")},t.getDerivedStateFromProps=function(e){var t=e.componentData.items,n=e.anchorTarget,a=e.relValue,o=t||[];return o=(o=o.filter((function(e){return!e.error}))).length>0?function(e){var t=e.anchorTarget,n=e.relValue;return e.items.map((function(e,a){var o=e.metadata;if(e.metaData&&e.mediaUrl)return e;var r={mediaUrl:e.url,metaData:{link:{type:"none",target:"_blank"}},directLink:{}};if(o){if(r.metaData=(0,i.Z)({},o,{link:{type:"none",target:"_blank"}}),"video"===e.metadata.type){r.metaData.link={target:"_blank",rel:"noopener",url:(0,l.D5W)(e.url||"")};var s=r.metaData.poster||{},m=s.pathname,u=s.thumbnail,d=(u=void 0===u?{}:u).pathname,c=u.width,h=u.height;m&&d?r.metaData.poster={url:v(d,"image"),width:c,height:h}:"string"==typeof r.metaData.poster&&(r.metaData.poster={url:r.metaData.poster,width:r.metaData.width,height:r.metaData.height})}r.metaData.alt=o.altText,e.metadata.link&&(r.metaData.link={type:"wix",target:e.metadata.link.target||t||"_self",data:{type:"ExternalLink",target:e.metadata.link.target||t||"_self",rel:e.metadata.link.rel||n||"noopener",url:(0,l.D5W)(e.metadata.link.url||"")}},r.directLink={url:(0,l.D5W)(e.metadata.link.url||""),target:e.metadata.link.target||t||"_self",rel:e.metadata.link.rel||n||"noopener"})}var p=(0,l.VjN)();return(0,i.Z)({},e,{metadata:void 0},r,{itemId:p,hash:p})}))}({items:o,anchorTarget:n,relValue:a}):d.s,{items:o}},n.shouldComponentUpdate=function(e,t){var n=this.props.componentData,a=n.styles,i=n.items,o=n.config,r=e.componentData,s=r.styles,l=r.items,m=r.config;return!((0,u.isEqual)(t.size,this.state.size)&&(0,u.isEqual)(s,a)&&(0,u.isEqual)(l,i)&&(0,u.isEqual)(m,o))},n.componentDidUpdate=function(e){this.shouldUpdateDimensions(e.componentData)&&this.updateDimensions()},n.componentWillUnmount=function(){this.observer.disconnect(),window.removeEventListener("resize",this.updateDimensions),this.updateDimensions.cancel()},n.render=function(){var e=this.props,t=e.theme,n=e.settings,i=e.seoMode;this.styles=this.styles||(0,l.y0G)({styles:D,theme:t});var o=n.scrollingElement,r=(0,a.Z)(n,w),m=this.state,u=m.size,d=m.items,c=this.getStyleParams(),h=i?_.viewMode.SEO:void 0;return s().createElement("div",{ref:this.containerRef,className:this.styles.gallery_container,"data-hook":"galleryViewer",role:"none",onContextMenu:this.handleContextMenu},null!=u&&u.width?s().createElement(b,{domId:this.domId,id:this.domId,allowSSR:!!i,items:d,options:c,container:u,settings:r,scrollingElement:"function"==typeof o?o():o,eventsListener:this.handleGalleryEvents,createMediaUrl:y,viewMode:h,customComponents:{customHoverRenderer:this.hoverElement},totalItemsCount:d.length}):null)},t}(s().Component)}}]);
//# sourceMappingURL=gallery-viewer.chunk.min.js.map